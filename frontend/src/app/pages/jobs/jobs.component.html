<div class="jobs-page">
  <!-- <h1 class="page-title">Toutes les offres d'emploi</h1> -->

  <!-- Barre de recherche + bouton recherche avancée -->
<div class="search-bar">
  <input 
    type="text" 
    placeholder="Rechercher une offre..." 
    [(ngModel)]="searchTerm" 
    (input)="filterJobs()" 
  />
  <button class="btn-advanced" (click)="showAdvanced = !showAdvanced">
    Recherche avancée
  </button>
</div>

<!-- Formulaire avancé -->
<div class="advanced-search" *ngIf="showAdvanced">
  <div class="field">
    <label>Ville</label>
    <input type="text" [(ngModel)]="advancedFilters.city" placeholder="Ville" />
  </div>
  <div class="field">
    <label>Spécialité</label>
    <input type="text" [(ngModel)]="advancedFilters.specialty" placeholder="Spécialité" />
  </div>
  <div class="field">
    
  </div>
  <div class="field">
    <label>Expérience (années)</label>
    <input type="number" [(ngModel)]="advancedFilters.experience" placeholder="Ex: 2" />
  </div>
  <div class="field">
    <label>Salaire minimum</label>
    <input type="text" [(ngModel)]="advancedFilters.salary" placeholder="Ex: 3000€" />
  </div>
  <button class="btn-primary" (click)="applyAdvancedSearch()">Appliquer</button>
</div>

  <div *ngIf="loading" class="loading">Chargement des offres...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <div class="jobs-grid">
    <div *ngFor="let job of filteredJobs" class="job-card">
      <div class="job-header">
        <h2>{{ job.title }}</h2>
        <span class="job-type">{{ job.type }}</span>
      </div>

      <div class="job-company">
        <strong>Société:</strong> {{ job.recruiter?.company || 'N/A' }}
      </div>

      <div class="job-details">
        <div><strong>Localisation:</strong> {{ job.location }}</div>
        <div><strong>Salaire:</strong> {{ job.salary || 'Non spécifié' }}</div>
        <div>
          <strong>Status:</strong>
          <span [ngClass]="{'active': job.status==='active', 'inactive': job.status==='inactive'}">
            {{ job.status }}
          </span>
        </div>
        <div *ngIf="job.expiryDate">
          <strong>Expire le:</strong> {{ job.expiryDate | date:'shortDate' }}
        </div>
      </div>

      <div class="job-footer">
          <button class="btn-primary" (click)="openJobModal(job)">Voir Détails</button>

      </div>
    </div>
  </div>
  <!-- MODAL DÉTAILS JOB -->
<div *ngIf="selectedJob" class="modal-overlay">
  <div class="modal">
    <h2>Détails de l'offre</h2>
    
    <div><strong>Titre:</strong> {{ selectedJob.title }}</div>
    <div><strong>Description:</strong> {{ selectedJob.description }}</div>
    <div><strong>Entreprise:</strong> {{ selectedJob.recruiter?.company || 'N/A' }}</div>
    <div><strong>Localisation:</strong> {{ selectedJob.location }}</div>
    <div><strong>Salaire:</strong> {{ selectedJob.salary || 'Non spécifié' }}</div>
    <div><strong>Type:</strong> {{ selectedJob.type }}</div>
    <div><strong>Expérience:</strong> {{ selectedJob.experience || 'Non spécifié' }} ans</div>
    <div *ngIf="selectedJob.expiryDate"><strong>Expire le:</strong> {{ selectedJob.expiryDate | date:'shortDate' }}</div>

    <div class="form-actions" style="margin-top:16px;">
      <button class="btn-primary" (click)="closeJobModal()">Fermer</button>
    </div>
  </div>
</div>
</div>
